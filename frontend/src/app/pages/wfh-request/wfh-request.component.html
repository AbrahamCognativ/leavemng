<div class="wfh-request-container">
  <div class="page-header">
    <h2>Work From Home Request</h2>
    <p class="subtitle">Fill out the form below to submit your work from home request</p>
  </div>

  <div class="content-wrapper">
    <!-- Left Column: Main Form -->
    <div class="form-section">
      <dx-form [formData]="wfhRequest" [colCount]="1">
        
        <!-- Date Selection -->
        <dxi-item [colSpan]="1">
          <div *dxTemplate>
            <div class="date-range-container">
              <div class="date-field">
                <label class="required">Start Date</label>
                <dx-date-box
                  [(value)]="wfhRequest.start_date"
                  type="date"
                  displayFormat="dd/MM/yyyy"
                  [min]="minDate"
                  (onValueChanged)="onStartDateChanged()">
                </dx-date-box>
              </div>
              <div class="date-field">
                <label class="required">End Date</label>
                <dx-date-box
                  [(value)]="wfhRequest.end_date"
                  type="date"
                  displayFormat="dd/MM/yyyy"
                  [min]="wfhRequest.start_date || minDate"
                  (onValueChanged)="onEndDateChanged()">
                </dx-date-box>
              </div>
            </div>
            <div class="calculated-days" *ngIf="calculatedDays > 0">
              <i class="dx-icon-info"></i>
              <span>This request covers {{ calculatedDays }} working day{{ calculatedDays > 1 ? 's' : '' }}</span>
            </div>
          </div>
        </dxi-item>

        <!-- Reason -->
        <dxi-item
          dataField="reason"
          editorType="dxTextArea"
          [editorOptions]="{
            height: 100,
            placeholder: 'Please provide a detailed reason for your work from home request (minimum 40 characters)',
            maxLength: 500
          }">
          <dxo-label text="Reason" showRequiredMark="true"></dxo-label>
          <dxi-validation-rule type="required" message="Please provide a reason for your work from home request"></dxi-validation-rule>
          <dxi-validation-rule type="custom" [validationCallback]="validateReasonLength" message=""></dxi-validation-rule>
        </dxi-item>

        <!-- Submit Buttons -->
        <dxi-item [colSpan]="1">
          <div *dxTemplate>
            <div class="form-actions">
              <dx-button
                text="Reset Form"
                type="normal"
                stylingMode="outlined"
                [width]="120"
                (onClick)="resetForm()">
              </dx-button>
              <dx-button
                [text]="submitting ? 'Submitting...' : 'Submit Request'"
                type="default"
                [width]="150"
                [disabled]="submitting"
                (onClick)="onSubmit()">
              </dx-button>
            </div>
          </div>
        </dxi-item>
      </dx-form>
    </div>

    <!-- Right Column: WFH Guidelines -->
    <div class="sidebar-section">
      <div class="wfh-guidelines-card">
        <h3>Important Points to Note</h3>
        <div class="guidelines-list">
          <div class="guideline-item">
            <div class="guideline-content">
              <h4>Advance Notice Required</h4>
              <p>WFH requests should be submitted at least <strong>14 days in advance</strong> to allow for proper planning and approval.</p>
            </div>
          </div>
          
          <div class="guideline-item">
            <div class="guideline-content">
              <h4>Not a Leave Day</h4>
              <p>Remember that WFH is <strong>not a leave day</strong>. You are expected to work your normal hours and be available during business hours.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<dx-toast
  [visible]="toastVisible"
  [message]="toastMessage"
  [type]="toastType"
  [displayTime]="4000"
  (onHiding)="toastVisible = false">
</dx-toast>